{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Bedankje Bruiloft Anna &amp; Maarten","text":"<p>Welkom op de website van het het \"Van Hem\" bedankje van de bruiloft van Anna &amp; Maarten. We willen jullie allereerst bedanken voor jullie aanwezigheid. We hopen dat het een geweldige avond was waar we het nog lang over zullen hebben.</p> <p>Op deze website leg ik uit wat het cadeau is. Wat je er mee kan en hoe je het in elkaar moet zetten.</p> <p>Allereerst, wat gaan we maken:</p>"},{"location":"#een-automatisch-bewateringssysteem","title":"Een automatisch bewateringssysteem","text":"<p>Als jullie als duo aanwezig waren, kon je zowel een \"Van Hem\" als \"Van Haar\" cadeau meepakken. Van Anna hebben jullie een bloempot gehad met heerlijke truffel kruidnoten.</p> <p>Ik hoop dat de pot nog niet weggegooid is, want wij gaan er voor zorgen dat er (automatisch) een plant in groeit! De plant zit natuurlijk wel, niet in begrepen</p> <p>(Wij willen en kunnen niet aansprakelijk gesteld worden door het plantenleed veroorzaakt door het gemaakt projectje)</p>"},{"location":"#plant-monitor","title":"Plant monitor","text":"<p>Dit systeem bewatert niet alleen je plant maar monitor deze ook. Door hem met je wifi netwerk te verbinden, kan je via de ingebouwde webpagina de status van je plant zien. En eventueel handmatig wat extra water toevoegen.</p> <p>Misschien dat je dit op de bruiloft wel even uitgeprobeerd hebt</p>"},{"location":"#eerste-stap","title":"Eerste stap","text":"<p>Om het systeem te bouwen gaan we verschillende stappen doorlopen. Namelijk,</p> <ul> <li>Flashen van de firmware</li> <li>Aansluiten van de sensor</li> <li>Aansluiten van de pomp</li> <li>Aansluiten van de batterijen</li> <li>Testen</li> </ul> <p>Als je de weg kwijt raakt staan deze stappen in het menu hier links op volgorde. Je kan beginnen door hier te klikken</p>"},{"location":"#home-assistant-en-esphome","title":"Home assistant en ESPHome","text":"<p>Dit projectje draait op software gebaseerd op ESPHome ,een onderdeel van de \"Open home foundation.\"  Een groep mensen die tegenwicht wil bieden aan een industrie die steeds meer systemen \"gesloten\" maakt. Waarbij de fabrikant bepaalt hoe en hoe lang jij je spullen kan gebruiken.</p> <p>De open home foundation, met als voornaamste project \"Home assistant.\" Probeert een \"open\" alternatief te beiden voor alle gesloten smart home systemen die er tegenwoordig op de markt zijn. Door de lijm te vormen tussen allerlei componenten die liefst lokaal draaien.</p> <p>ESPHome is eerst als add-on ontstaan voor home assistant op eigen open source hardware te programmeren. Echter kan de hardware ook vrij makkelijk gebruikt worden zonder home assistant.</p> <p>Hier vind je meer over home assistant en de open home foundation</p>"},{"location":"flash/","title":"Flash","text":"<p>Door op de onderstaande knop te klikken, kan je verbinding met de esp maken om de firmware naar de microcontroller te flashen</p>"},{"location":"about/esphome/","title":"ESPHome","text":"<p>ESPHome is een krachtige en gebruiksvriendelijke open-source tool waarmee je eenvoudig slimme apparaten kunt maken op basis van goedkope ESP8266- en ESP32-microcontrollers. Het stelt je in staat om zonder uitgebreide programmeerkennis je eigen IoT-projecten te bouwen en naadloos te integreren met populaire domoticasystemen zoals Home Assistant.</p> <p>Met ESPHome schrijf je configuraties in YAML, waarin je precies definieert wat een apparaat moet doen: van het uitlezen van sensoren tot het aansturen van relais, LED's of displays. Zodra je configuratie klaar is, compileert ESPHome automatisch de firmware en kun je deze via USB of draadloos uploaden naar je apparaat.</p> <p>ESPHome is geliefd vanwege de flexibiliteit, betrouwbaarheid en de sterke community-ondersteuning. Het biedt een geweldige balans tussen eenvoud en geavanceerde functionaliteit, wat het ideaal maakt voor zowel beginners als ervaren makers die hun huis willen automatiseren met zelfgebouwde slimme apparaten.</p> <p>Als je ooit hebt gedacht aan het slimmer maken van je huis zonder vast te zitten aan dure producten of beperkte apps, dan moet je ESPHome echt eens proberen. Het is niet alleen betaalbaar, maar ook verrassend leuk om mee te experimenteren. Zelf heb ik het ook door heel mijn huis gebruikt. En jij hebt nu hopelijk ook je eerste projectje wat hier op gebaseerd is. Wil je meer proberen of heb je een andere automatiseringsprobleem die je thuis wilt tackelen. Laat he me weten. Ik help je graag op weg</p>"},{"location":"about/home-assistant/","title":"Home assistant","text":"<p>De Open home foundation is ontstaan uit hun partner Nabu Casa. Nabu Casa is het bedrijf wat het onderhoud en ontwikkelen van Home assistant en ESPHome op zich neemt. Door  hardware te verkopen en abonnementen voor cloud toegang, proberen zij de geldstroom te zijn die Home assistant draaiende houd en sturing geeft. Echter blijven de projecten volledig open source gratis te gebruiken. Geen van de functionaliteit zit vergrendeld achter een zogenaamde paywall. En alles kan op andere manieren verwezenlijkt wordt. Zei het dat het wel meer moeite kan kosten.</p> <p>Als oud-plc programmeur gruwel ik van de arbitraire restricties die bedrijven tegenwoordig in hun apparaten programmeren. En ook as vrijwilliger van het Repaircafe, kijk ik schrijnend toe hoe apparaten door \"planned obscolessence\" de prullenbak in verdwijnen, omdat de fabrikant er niks meer mee wil doen.</p> <p>Het is dan ook geen wonder dat ik groot fan van Home assistant ben voor het automatiseren van mijn huis. Mocht je na dit knutselen enthousiast geworden zijn. Verwijs ik je graag door naar de website van https://www.home-assistant.io/installation/</p> <p>Hier wordt uitgelegd hoe je home assistant installeert op een scala aan apparaten. Wil je het een keer uitproberen? Installeer het dan op een oude laptop of oude computer die je nog ergens hebt liggen. Mocht je niet uit de instructies komen. Bel gerust, ik help je graag.</p> <p>Daarnaast heb ik nog enkele oude chromebox'en liggen. Google wil deze niet meer updaten dus voor scholen zijn ze niet meer geschikt. Maar voor home assistant draaien zijn ze uitmuntend!</p> <p>Als je zelf aan de slag wilt kan ik 2 wegen aanraden.</p> <p>Wil je een goed werkend betrouwbaar platform? Ga dan voor een Home Assistant Green of Yellow. Daar steun je het project direct mij en jij krijgt goed ondersteunde hardware. Zeg zelf. Als je die oude laptop niet meer vertrouwd om windows te draaien. Vertrouw je hem dan wel met je huis aansturen?</p> <p>Wil je vooral knutselen? Ga voor de nieuwste raspberry pi (5 op het moment van schrijven). Dit Doe-Het-Zelf bordje is uitmuntend ondersteund. Ik ben hier ook op begonnen. Er zitten wel echter een paar addertjes onder het gras waar je goed op moet letten. Zoals bijvoorbeeld het \"verslijten\" van het flash geheugen van een sd kaartje</p> <p>Hou je van overkill? Kom eens langs op de koffie om het over server racks te hebben. Een 3 of 5 node cluster met \"High-availability\" kan ervoor zorgen dat jouw home assistant niet plat te krijgen is. SAF (Spouse Approval Factor) gegarandeerd!</p>"},{"location":"bonus/battery-box/","title":"Extra groot batterijpakket","text":"<p>Hoera, als je het hier gered hebt, ben je een heel eind gekomen. Zover dat je nu kennelijk er last van hebt dat de batterij wel erg snel leeg is! Gelukkig heb ik voor de eerste 4 mensen die er naar vragen, een extra grote batterijdoos beschikbaar.</p> <p>Mocht je achter het net vissen, of ook klaar zijn met batterijen, niet getreurd ik heb nog een hele grote doos met oude voedingen. Zolang er een stopcontact in de buurt van je plant is, hoef je nooit meer de batterijen te vervangen. Stuur me een berichtje en kom eens langs voor de koffie! Dan regelen we het.</p>"},{"location":"bonus/dripper/","title":"Druppelaar","text":""},{"location":"bonus/extra-sensors/","title":"Extra sensoren","text":"<p>Probeer ook eens een bme680 omgevingssensor aan te sluiten. Of als je al een netvoeding hebt, Een stofdeeltjes meter</p>"},{"location":"bonus/modifying-firmware/","title":"Firmware aanpassen","text":"<p>Als je uitgekeken bent op de firmware die ik voor je gemaakt heb kan je deze aanpassen. Hier zijn meerdere mogelijkheden voor.</p> <p>De firmware wordt gecompileerd door ESPHome op basis van een <code>yaml</code> configuratie bestand. In het geval van mijn firmware bestaat de configuratie uit</p> <pre><code>substitutions:\n  name: plant-waterer\n  friendly_name: Wedding Gift Plant Waterer\n\nesphome:\n  name: \"${name}\"\n  friendly_name: \"${friendly_name}\"\n  # Use this to add a mac suffix to the device name to make it unique\n  # Unfortunately this makes it harder to discover for non home assistant users\n  # So for this project we turn it off by default\n  # However if you have multiple devices with the same name on your network\n  # You should enable this\n  # name_add_mac_suffix: true\n  project:\n    name: mjkl-gh.${name}\n    version: PLACEHOLDER\n\nesp32:\n  board: esp32dev\n  framework:\n    type: esp-idf\n\n# Enable logging\nlogger:\n\n# Enable Home Assistant API\napi:\n\n# Allow Over-The-Air updates\nota:\n  - platform: esphome\n\n# Allow provisioning Wi-Fi via serial\nimprov_serial:\n\nwifi:\n  # Set up a wifi access point\n  ap:\n    ssid: \"Plant Waterer\"\n\n# In combination with the `ap` this allows the user\n# to provision wifi credentials to the device via WiFi AP.\ncaptive_portal:\n\ndashboard_import:\n  package_import_url: github://mjkl-gh/wedding-gift-for-guests/firmware/plant-waterer.yaml@latest\n  import_full_config: true\n\n# Sets up Bluetooth LE (Only on ESP32) to allow the user\n# to provision wifi credentials to the device.\nesp32_improv:\n  authorizer: none\n\n# To have a \"next url\" for improv serial\nweb_server:\n\n# This sensor reads the analog voltage coming from the Soil Moisture sensor\n# The sensor is connected to pin 32 (ADC1_CH4) on the ESP32\n# The sensor outputs a voltage between 1.795V (dry) and 1.43V (wet)\n# The voltage is then converted to a percentage using the calibrate_linear filter\n# The percentage is then smoothed using a sliding_window_moving_average filter\n# and a median filter to remove any spikes in the readings.\n# The sensor is updated every 10 seconds.\n# The sensor is named \"Soil Moisture Value\" and has an icon of a flower\n# The sensor is also given an id of \"soil_moisture\" to allow other components to reference it.\nsensor:\n  - platform: adc\n    pin: 32\n    name: Soil Moisture Value\n    attenuation: 11db\n    id: soil_moisture\n    accuracy_decimals: 0\n    unit_of_measurement: \"%\"\n    update_interval: 10s\n    icon: mdi:flower\n    filters:\n      - calibrate_linear:\n          - 1.795 -&gt; 0.0\n          - 1.43 -&gt; 100.0\n      - sliding_window_moving_average:\n          window_size: 15\n          send_every: 15\n      - median:\n          window_size: 15\n          send_every: 7\n          send_first_at: 3\n\n# This sensor is useful as a trigger for automation in Home Assistant\n# anything below the threshold will report dry in home assistant.\nbinary_sensor:\n  - platform: gpio\n    pin:\n      number: 33\n      mode:\n        input: true\n        pullup: true\n    id: binary_soil_moisture\n    name: Soil Moisture\n    device_class: moisture\n    filters:\n      - delayed_on: 100ms\n      - delayed_off: 100ms\n    on_press:\n      - script.execute: water_pump\n\n# Timed switch for water pump - manually trigger water pump for specified time.\n# Ajust delay to suit lenght of time the pump runs\n# This was added to prevent the plant/ room getting drenched by an\n# accidental press of the switch emptying a whole water resevoir!\nswitch:\n  - platform:  output\n    name: \"Water pump\"\n    icon: \"mdi:water\"\n    id: pump\n    output: relay\n    on_turn_on:\n      - logger.log: \"Pump Turned On!\"\n      - delay: 3s\n      - switch.turn_off: pump\n      - logger.log: \"Pump Turned Off!\"\n\noutput:\n  - platform: gpio\n    pin: 23\n    id: relay\n    inverted: True\n\n# This is the script that runs when the soil moisture sensor is triggered\n# It will run the water pump for 1 second, then wait 9 seconds and check\n# the soil moisture sensor again. If the sensor is still triggered it will\n# run the pump again. This will continue until the sensor is no longer triggered.\n# This is to prevent overwatering the plant if the sensor is faulty or\n# the plant is not absorbing the water fast enough.\nscript:\n  - id: water_pump\n    then:\n      - while:\n          condition: \n            binary_sensor.is_on: binary_soil_moisture\n          then:\n            - output.turn_on: relay\n            - delay: 1s\n            - output.turn_off: relay\n            - delay: 9s\n</code></pre> <p>Door dit bestand aan ESPHome te geven zal het eerst de benodige C(++) code genereren. Vervolgens zal het de code compileren om een bestandje maken wat je kan gebruiken om de microcontroller te flashen. Dit kan op de volgende manieren:</p> <p>Dingen die je mogelijk zou willen aanpassen:</p> <ul> <li>Pinnummers waar sensoren of de pump aangesloten zitten</li> <li>Calibratiewaarden aanpassen van de analoge sensor</li> <li>Het script aanpassen wat de plant bewaterd</li> <li>Extra sensoren toevoegen, bijvoorbeeld een BME680 environmental sensor</li> <li>Extra automatiseringen toevoegen via actions of scripts</li> </ul>"},{"location":"bonus/modifying-firmware/#esphome-add-on","title":"ESPHome add-on","text":"<p>Als je al home assistant thuis hebt, en daarbij de \"ESPHome Builder\" add-on. Kan je in de add-on \"Take control\" activeren op de plant-waterer. De add-on zal dan mijn configuratie uit de repo downloaden en beschikbaar maken. Deze kan je dan naar hartelust aanpassen. Bijvoorbeeld als je de analoge sensor wilt kalibreren. De esp kan vervolgens via \"Over-The-Air\" updates via wifi ge-update worden.</p> <p></p>"},{"location":"bonus/modifying-firmware/#de-repository-forken","title":"De repository forken","text":"<p>Door naar de git repository te gaan (zie de link in de rechter boven hoek). Kan je de broncode van deze website, maar ook van de firmware in zien. Deze repo is geconfigureerd om automatisch de firmware te compileren. Dit gebeurt via github actions.</p> <p>Als je de repository \"forked\" door op de pagina op \"fork\" te klikken, maak je een eigen kopie van de repository. Vervolgens kan je in de editor online het bestandje in de map \"firmware\" genaamd plant-waterer.yaml aanpassen. Als dit \"commit\" op je eigen fork. Zal de github action automatisch een nieuwe firmware releasen. Deze kan je vervolgens downloaden onder \"releases.\"</p>"},{"location":"instructions/01-flashing-firmware/","title":"De firmware flashen","text":"<p>Hier lees je alles over het flashen van de firmware. Mocht je klaar zijn met de standaard firmware die ik meelever? Pas hem aan! Volg deze link naar de bonuspagina om te leren hoe je je eigen firmware schrijft</p>"},{"location":"instructions/01-flashing-firmware/#flashen","title":"Flashen","text":"<p>Om de firmware naar de microcontroller te flashen moeten we de microcontroller via usb aansluiten op onze computer. Haal de microcontroller uit de verpakking en sluit hem direct aan op je computer zoals in onderstaande foto</p> <p></p> <p>Het is hierbij belangrijk dat je de usb-c connector op de micro controller zelf gebruikt en niet die op het proto-board er onder.</p> <p>Vervolgens ga je naar de flash-pagina en klik je op connect om te verbinden met de micro controller. Installeer dan de laatste versie van mjkl-gh.plant-waterer.</p> <p>De firmware is gebaseerd op ESPHome. Hierdoor is het super makkelijk om een configuratie te schrijven en deze te compileren. Of om deze configuratie aan te passen. De configuratie van deze firmware vind je hier</p>"},{"location":"instructions/01-flashing-firmware/#verbinding-maken-met-wifi","title":"Verbinding maken met wifi","text":"<p>Nu de microcontroller geflasht is kan deze verbonden worden met je wifi netwerk. Deze stap is optioneel, maar door dit te doen kan je onder andere updaten via wifi. De sensor waarden uitlezen en de pomp handmatig activeren.</p> <p>Dit kan op meerdere manieren. Namelijk:</p>"},{"location":"instructions/01-flashing-firmware/#home-assistant","title":"Home assistant","text":"<p>Voor mensen die al een Home assistant installatie hebben met bluetooth proxy of de app gebruiken. Home assistant detecteert het nieuwe apparaat automatisch. Wil je Home assistant eens uitproberen. Ik kan je op weg helpen, lees meer hier over op de pagina achter de link. Open de app en ga naar Settings-&gt;Integrations&amp;Devices en hier zal een nieuw apparaat ontdekt zijn. Voeg dit apparaat toe (Home assistant zal om je wifi wachtwoord vragen) en alles zou moeten werken vanaf hier</p>"},{"location":"instructions/01-flashing-firmware/#improv-serial","title":"Improv serial","text":"<p>Als je op deflash-pagina nog verbonden bent of opnieuw verbind, zal de pagina automatisch detecteren dat het zogenaamde \"Improv serial\" protocol actief is op de micro controller. Door op \"Configure Wi-Fi\" te klikken en het wifi netwerk en wachtwoord naar keuze in te vullen. Zal de micro-controller verbinding maken met het lokale wifi netwerk.</p>"},{"location":"instructions/01-flashing-firmware/#improv-ble","title":"Improv Ble","text":"<p>Een andere optie is het Improv bluetooth protocol te gebruiken. Door naar de improv website te gaan op een apparaat met bluetooth. Kan je de micro-controller verbinden met je wifi netwerk.</p> <p>Klik op de grote knop \"Connect device to wifi.\" Je apparaat zal nu via bluetooth scannen naar apparaten die het Improv Ble protocol ondersteunen. Zoals de zojuist geflashte microcontroller.  Je apparaat zal nu onder andere een apparaat vinden genaamd \"plant-waterer-xxxx\" waarbij xxxx staat voor een uniek id wat gegenereerd is.</p> <p>Klik op plant-waterer-xxxx en vul je wifi gegevens in om het te laten verbinden</p>"},{"location":"instructions/01-flashing-firmware/#verbinding-maken-met-het-dashboard","title":"Verbinding maken met het dashboard","text":"<p>Nu de micro controller aan je netwerk hangt kunnen we kijken of we bij het dashboard kunnen komen. Dit kan op verschillende manieren</p>"},{"location":"instructions/01-flashing-firmware/#home-assistant_1","title":"Home assistant","text":"<p>Als je al Home assistant hebt is dat veruit de makkelijkste optie. Ga in de app op of op de webpagina naar <code>Settings-&gt;Devices&amp;Services-&gt;ESPHome-&gt;Wedding Gift Plant Waterer xxxxxx</code> en klik op <code>Visit</code> Je webbrowser zou nu moeten openen op het dashboard.</p>"},{"location":"instructions/01-flashing-firmware/#via-mdns","title":"Via mDNS","text":"<p>Voor mensen zonder home assistant niet getreurd. De module kondigt zichzelf aan via je wifi netwerk. Ga naar plant-waterer.local en je laptop zal het dashboard openen in je webbrowser. Gezien dit via zogenaamde \"Broadcast\" berichten gaat is dit niet altijd even betrouwbaar. </p> Werkt het niet? <p>Het kan zijn dat je een bericht krijgt dat je webbrowser geen verbinding kon maken. Met name op windows laptops van werk, kan het slecht werken. Dit komt omdat Microsoft in het verleden zich niet aan afspraken en standaarden gehouden heeft. En <code>.local</code> adressen anders ingezet heeft.</p>"},{"location":"instructions/01-flashing-firmware/#via-serial","title":"Via Serial","text":"<p>Als mDNS niet werkt kunnen we ook het ip adres achterhalen via de seri\u00eble poort. Verbind de microcontroller weer met de computer en ga weer naar de flash pagina. Je kan hier op Logs&amp;Console klikken om verbinding te maken</p> <p></p> <p>Als je nu op <code>Reset device</code> klikt zal de microcontroller opnieuw opstarten. 1 van de berichten tijdens het opstarten bevat het zogenaamde ip adres zoals hieronder:</p> <p></p> <p>Typ dit adres in de de adresbalk van je webbrowser om de pagina te bezoeken. Zoals <code>http://&lt;ip adres in de logs&gt;</code>, bijvoorbeeld <code>http://192.168.1.33</code></p>"},{"location":"instructions/01-flashing-firmware/#via-je-router","title":"Via je router","text":"<p>Mocht je de microcontroller even buiten handbereik zijn, kan je het ip adres vaak ook opzoeken in de router. Dit is het kastje wat je vaak van je provider gekregen hebt en je huis van internet voorziet. Dit apparaat deelt de adressen uit en houd hier vaak een logboek van bij. Hoe je deze informatie er echter uit kan halen verschild enorm per fabrikant. Vaak is de router te bereiken op een adres als <code>192.168.1.1</code> het specifieke adres staat op je laptop onder netwerk instellingen als \"Default gateway\"</p> <p>Als je vervolgens inlogt op de router zal er onder iets als \"Netwerk\" een apparaat aangemeld staan als <code>plant-waterer</code>. Bezoek het hierbij genoemde ip-adres om het dashboard te bezoeken.</p>"},{"location":"instructions/02-sensor/","title":"Aansluiten van de sensoren","text":""},{"location":"instructions/02-sensor/#microcontroller-op-development-board","title":"Microcontroller op development board","text":"<p>Nadat de microcontroller geflasht is kunnen we hem op het zogenaamde \"development board\" prikken.</p> <p>Warning</p> <p>Zorg dat hij hierbij in de goede richting staat anders matchen de pinnen niet en kan je de microcontroller beschadigen als je er spanning op zet!</p> <p>Voor het aansluiten van de sensoren gebruiken we de kabeltjes die bij de sensor in de verpakking zaten. De connectoren die hier aan zitten heten zogenaamde \"Dupont\" stekkers.</p> <p></p>"},{"location":"instructions/02-sensor/#capacitieve-sensor-vork","title":"Capacitieve sensor vork","text":"<p>De vork-achtige sensor verbind je met 2 kabeltjes aan het \"versterker\" bordje. Zoals hieronder:</p> <p></p> <p>De richting zou hier niet uit moeten maken omdat het hier om een passieve sensor gaat</p>"},{"location":"instructions/02-sensor/#versterker-met-esp32-development-board-verbinden","title":"Versterker met esp32 development board verbinden","text":"<p>Nu gaan we de sensor met de esp32 verbinden. Zorg eerst dat je 4 kabeltjes bij elkaar hebt zoals hieronder:</p> <p></p> <p>En verbind deze met het versterker-printje:</p> <p></p> <p>Let vervolgens goed op welke kabels je met <code>D0</code>, <code>A0</code>, <code>VCC</code> en <code>GND</code> verbind.</p> <p>Verbind deze vervolgens met de juiste pinnen op de esp32. Hier hebben we voor elke pin <code>G</code>(round) <code>V</code>(oltage) en <code>S</code>(ignal).</p> <p>Verbind eerst <code>GND</code> met <code>G</code> en <code>VCC</code> met <code>V</code> zoals hieronder:</p> <p></p> <p>En verbind vervolgens de signaalpinnen met de juiste pinnen. Namelijk <code>D32</code> voor <code>A0</code> en <code>D33</code> voor `D0</p> <p></p> <p>Als je de usb print nu een usb voeding hangt kan je het dashboard bezoeken zoals genoemd onder Verbinding maken met het dashboard</p> <p>Je zal nu zien dat de waarden op het dashboard matchen met de sensoren, mits je ze goed aangesloten heb. Pak een glas water erbij en je kan de sensor testen.</p> <p>Als je dit hebt aangesloten kan je verder met de pomp aansluiten</p>"},{"location":"instructions/03-pump/","title":"Aansluiten van de pomp","text":"<p>Nu de sensoren aangesloten zijn kunnen we de pomp gaan aansluiten. Hiervoor zullen we helaas in de kabels moeten knippen. Pak dus het volgende gereedschap erbij:</p> <ul> <li>kniptang</li> <li>hittebron (heatgun, verfstripper, f\u00f6hn aansteker of gaspit)</li> <li>tang</li> <li>kleine schroevendraaier</li> <li>striptang (optioneel)</li> <li>stekkertang (optioneel)</li> </ul> <p>Waarschijnlijk zullen velen van jullie geen stekkertang kennen. Maar deze vergemakkelijkt het dichtknijpen van de verbinders aanzienlijk. Zelf heb ik er 1 van de Parkside (van de Lidl) zoals hieronder:</p> <p></p>"},{"location":"instructions/03-pump/#relais-aansluiten","title":"Relais aansluiten","text":"<p>We gaan eerst het relais aansluiten.</p> <p>Warning</p> <p>Zorg dat je alleen kabels aansluit als de microcontroller uit staat. Dus niet aan een voeding of laptop hangt</p> <p>Dit kan met 3 vrouwtje-vrouwtje kabels met Dupont-stekkers. Schuif deze over de connector heen</p> <p></p> <p>Let goed op de <code>IN</code> <code>GND</code> en <code>VCC</code> namen van de pinnen. Sluit deze vervolgens correct aan op de micro controller</p> <p></p> <p>Zorg dat <code>GND</code> op <code>G</code> komt, <code>VCC</code> op <code>V</code> en <code>IN</code> op <code>S</code> van <code>D23</code></p> <p>Als je nu de microcontroller weer aan een voeding hangt en het dashboard bezoekt zal je merken dat als je de toggle \"Water pump\" activeert, je het relais hoort klikken. Na 3 seconden klikt het relais weer terug. Dit is om te voorkomen dat de plant teveel water krijgt als de pomp er eenmaal aanhangt.</p>"},{"location":"instructions/03-pump/#pomp-aansluiten-op-relais","title":"Pomp aansluiten op relais","text":"<p>We gaan nu het pompje aan het relais hangen.</p> <p>Knip hiervoor 1 van de de Dupont-kabeltjes (bijvoorbeeld een blauwe) door, Deze gaat verbonden worden met de voeding vanuit de microcontroller. Pak de geknipte kant en strip hier 3mm van de kabel af. Gebruik hiervoor een striptang, of zet de kniptang er voorzichtig op en trek de mantel naar je toe. ALs je hard genoeg trekt zal de mantel achter je kniptang loslaten.</p> <p>Stop deze kabel in de middelste uitgang van het relais. Let hier niet op de rode draad deze zit nog in de verkeerde poort.</p> <p></p> <p>Schroef de draad onder de klem vast.</p> <p>Warning</p> <p>Klem de kabel op koper in. Als je hem inklemt op de kabelmantel kan deze geen contact maken. Laat ook niet teveel koper uitsteken. Dit verhoogt de kans op kortsluiting</p> <p>Pak nu de pomp erbij en verbind de rode draad met de rechter schroefklem. Zoals hieronder weergegeven:</p> <p></p>"},{"location":"instructions/03-pump/#pomp-aansluiten-op-microcontroller","title":"Pomp aansluiten op microcontroller","text":"<p>We kunnen nu de pomp aansluiten op microcontroller. Knip nu een andere kleur kabel door. Je kan ook het andere eind van de blauwe hergebruiken. Maar dit verhoogt de kans op het fout aansluiten van de pomp, dus gebruik bij voorkeur een andere kleur.</p> <p>Deze kabel zullen we aan de zwarte draad van de pomp moeten krimpen. Eerst zullen we de zwarte krimpkous over de draad schuiven. Dat moet nu omdat dit later niet meer gaat!</p> <p>Pak het gouden connectortje en legt de zwarte draad daarin. Hij ligt goed als de eerste metalen klem bij de mantel zit en de tweede bij het koper. De eerste houdt namelijk de kabel stevig vast. De tweede maakt de verbinding. Zoals hieronder:</p> <p></p> <p>\"Krimp\" nu de connector. Dit kan met de krimptang, of door met een normale tange de oortjes dicht te vouwen. Doe eerst de buitenste zodat de kabel goed ingeklemd zit. Klem daarna de 2e oortjes (nog steeds aan dezelfde kant van het midden) om het koper.</p> <p></p> <p>Nu de eerste kabel vast zit kunnen we de 2e kabel invoeren en krimpen. Herhaal hetzelfde proces als voor de eerste:</p> <p></p> <p>En schuif vervolgens de krimpkous over de verbinding en hou deze bij een hittebron om hem om de verbinding te laten krimpen:</p> <p></p> <p>Warning</p> <p>Bij deze foto zit de rode draad nog in de verkeerde uitgang van het relais.</p> <p>Nu kan de pomp met de microcontroller verbonden worden. Verbind de kabel die naar het midden van het relais loopt met <code>VCC</code> en de kabel die verbonden is met de zwarte draad van de pomp met <code>GND</code>. Zoals:</p> <p></p>"},{"location":"instructions/03-pump/#testen","title":"Testen","text":"<p>De pomp zou nu correct aangesloten moeten zijn op de microcontroller. Je kan dit testen door de micro controller aan de voeding te hangen. En vervolgens via de website de \"Water pump\" toggle te activeren.</p> <p>Als dit allemaal werkt kan je naar de laatste stap de batterijen aansluiten</p>"},{"location":"instructions/04-batteries/","title":"Aansluiten van de batterijen","text":"<p>Dan komt nu het stuk waar het hopelijk allemaal samenkomt. het aansluiten van de batterijen. Echter voordat we de batterijen kunnen aansluiten, moeten een kabel gereed maken. Hiervoor heb je het volgende gereedschap nodig:</p> <ul> <li>Zijkniptang</li> <li>Hittebron (hittepistool, verfstripper, f\u00f6hn, gaspit of als laatste redmiddel een aansteker)</li> <li>Striptang (optioneel)</li> <li>Stekkertang (optioneel)</li> </ul> <p>Bij de set zat een kabel usb naar 5.5mm \"DC barrel jack\". Deze hebben we nodig, maar zonder de usb stekker. Deze kan je er dus afknippen met de zijkniptang. Strip vervolgens een stuk mantel van 3cm van de usb kabel af. Zorg dat de mantel van de binnenkabels hierbij heel blijft!</p> <p>Als dit gelukt is strip je de uiteinden van de usb kabels een 0.5cm af. Doe dit heel voorzichtig de usb kabel is erg dun en dus fragiel. Deze gaan we weer verbinden met de kabel die uit de batterijdoos komt.</p> <p>Schuif eerst 2 krimpkousen over de rode en zwarte batterijkabel. Deze moeten uiteindelijk om de connector gekrompen worden.</p> <p>Leg de roze kabel in een krimpconnector, met de mantel in het eerste lipje en het gestripte in de tweede zoals hieronder:</p> <p></p> <p>Knijp de connector dicht door de lipjes dicht te vouwen. Eerst het lipje om de mantel dan het lipje om de gestripte kabel. Of gebruik een stekker krimptang</p> <p></p> <p>Leg nu de rode kabel van de batterijdoos in het andere uiteinde. Herhaal het proces.</p> <p></p> <p>Krimp vervolgens op dezelfde manier de zwarte kabel op de blauwe.</p> <p>Schuif nu de krimpkous over de connectoren</p> <p></p> <p>Gebruik nu een hittebron om de krimpkousen om de connectoren te krimpen. De batterijkabel is nu af. Als je er klaar voor bent kan je de connector in het PCB schuiven. Stop 4 AAA batterijen in de batterijhouder. Als je het schuifje op de batterijhouder omzet, zouden er lampjes moeten gaan branden en zou het project tot leven moeten komen.</p> <p>Gefeliciteerd, Als alles goed is gegaan heb je nu een werkende opstelling. Nu kunnen we doorgaan met testen en afstellen</p>"},{"location":"instructions/05-testing/","title":"Testen en Afstellen","text":"<p>Nu alle onderdelen in elkaar zitten kunnen we de opstelling gaan testen en uiteindelijk gaan afstellen.</p> <p>!!!! warning     Het werkt het beste als je de instructies voor het testen eerst volledig doorleest. En dan pas de stappen uitvoert</p>"},{"location":"instructions/05-testing/#testen","title":"Testen","text":"<p>Als je dat nog niet gedaan had, kan je nu het schuifje op de batterijhouder omzetten. De ESP32 zou nu tot leven moeten komen. Als tijdens het flashen alles is goed gegaan, verbind hij met je wifi netwerk en is het dashboard bereikbaar. Er is een zeer goede kans dat vrij snel na het opstarten het pompje begint te pompen. Deze zal kort pompen en dan een periode wachten. Dan zal hij weer pompen en wachten, etc etc. Dit hoort en komt omdat de sensor droog is. Als dit gebeurt kan je beter eerst de batterij weer uitzetten en een schaaltje water halen.</p> <p>Leg vervolgens de sensor in het schaaltje water, maar NIET de pomp. Dit is om te voorkomen dat de pomp aan gaat terwijl we eerst wat andere dingen testen. Zet nu het schuifje weer aan. De pomp zal als het goed is niet starten. Start hij wel let dan goed op het kleine printplaatje tussen de sensor en de micro controller. Hier zit een potmeter op (blauw met wit) en een ledje. Als het ledje brand dan is, ondanks het water, de sensor nog steeds te droog. Dat klopt natuurlijk niet. We kunnen de sensor inregelen door met een kruiskopschroevendraaier de potmeter te verdraaien. Rechtsom maakt hem gevoeliger. Linksom, minder gevoelig. Draai de potmeter naar links tot het ledje uitgaat. De sensor is nu niet meer hoog</p> <p>Nu de pomp niet meer draait. Kunnen we het dashboard bezoeken. Bezoek het adres uit de programmeren stap.</p> <p>Weet je die niet meer? Je kan ook de batterij loskoppelen. Dit is erg belangrijk om schade aan je laptop te voorkomen! En dan microcontroller met usb met je laptop te verbinden. Als je vervolgens op de flash pagina op <code>connect</code> klikt kan je voor <code>Logs</code> kiezen en dan zal je de logs te zien krijgen. Klik vervolgens <code>Reset device</code> en het apparaat zal opnieuw opstarten, Tussen de logging komen de wifi instellingen te staan. 1 hiervan is het \"ip adres\". Als je deze in de browserbalk intikt zal je naar het dashboard gaan.</p> <p>Of zie de programmeren stap voor de andere mogelijkheden.</p>"},{"location":"instructions/05-testing/#afstellen","title":"Afstellen","text":"<p>Zoals je ondertussen misschien gemerkt hebt reageert het pompje op de vochtigheid van de sensor. Draai eerst de sensor naar minst gevoelig. Maak de sensor eerst helemaal droog en draai dan totdat het lampje uitgaat. Draai dan terug zodat het lampje net aan is gegaan. De sensor is nu afgesteld om de plant helemaal droog te houden.</p> <p>Nu kan je de sensor in de plant plaatsen. Stop ook het slangetje bij de plant. Zorg dat deze goed vastgeklemd zit. Je kan hier de bonus druppelaar voor gebruiken. Kijk ook bij de andere bonus dingen voor inspiratie! Als de pomp losschiet kan hij namelijk water op plaatsen dumpen waar dat niet gewenst is. Het beste werkt als de slang tot de bodem van de pot in de grond zit, als je de druppelaar niet gebruikt</p> <p>Hang nu de pomp in een waterreservoir. Bijvoorbeeld een bierblikje. Je kan een blikopener gebruiken om het bierblikje te openen en vervolgens de pomp hierin te laten zakken. Zorg dat het gedeelte met de krimpkous boven water blijft. Bijvoorbeeld met wat tape. De rest kan prima onder water.</p> <p>Je kan de plant nu water geven door de sensor iets gevoeliger te maken. Draai de potmeter totdat het lampje (en de pomp) weer aanspringt. De pomp zal nu een aantal pompcyclussen uitvoeren. Tot de plant nat genoeg is. Laat het water intrekken, en controleer later weer. Bijvoorbeeld de volgende dag.</p> <p>Doordat de pomp de plant nu op een constant waterniveau houdt, is het makkelijk teveel of te weinig water te geven. Laat de pomp zijn werk doen voor een langer tijdsbestek. Blijft de grond erg droog, en krijgt de plant zichtbaar te weinig water? schroef dan elke dag de potmeter ietsje op zodat de pomp vaker en meer water geeft. Als de plant het erg zwaar heeft, kan je ook even tijdelijk handmatig bewateren terwijl je het proces verder inregelt. Via het dashboard kan je de pomp handmatig activeren. Of kan je natuurlijk een handgieter gebruiken.</p> <p>Het dashboard heeft ook een analoge vochtigheidsmeter. Weet je de juiste theoretische vochtigheid voor jouw plant? Dan kan je die gebruiken om het systeem sneller in te regelen. Let er wel op dat de meter de huidige waarde aangeeft, en niet de gemiddelde waarde. Het uiteindelijke gemiddelde kan dus lager (of hoger) liggen, en dat is waar je plant vooral om zal geven.</p>"},{"location":"instructions/05-testing/#troubleshooting","title":"Troubleshooting","text":"<p>Verbind de esp32 niet meer met wifi?</p> <p>Bezoek de programmeer pagina en flash de esp32 opnieuw. Doorloop alle stappen om met wifi verbinding te maken daarna</p>"}]}